<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Golos+Text:wght@400..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css">
  <title>–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å | BirdBoard</title>
  <style>
    /* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        max-width: 500px;
        width: 90%;
        text-align: center;
        position: relative;
    }

    .close-modal {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 28px;
        cursor: pointer;
        color: #666;
    }

    .close-modal:hover {
        color: #333;
    }

    .modal-actions {
        margin-top: 30px;
        display: flex;
        gap: 15px;
        justify-content: center;
    }

    .modal-btn {
        padding: 12px 25px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        font-family: "Golos Text", sans-serif;
    }

    .modal-btn.primary {
        background: linear-gradient(90deg, #aadc4b, #ffd155, #ff973c);
        color: white;
    }

    .modal-btn.secondary {
        background: rgba(141, 141, 141, 1);
        color: white;
    }

    .modal-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    }
  </style>

    <script src="../js/api.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/profile.js"></script>
    <script src="./js/burger.js"></script>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="header__wrapper">
        <img src="../icons/BirdBoard.svg" alt="logo">
        <div class="header__content">
          <nav>
            <ul class="header__nav">
              <li><a href="../index.html">–ì–æ–ª–æ–≤–Ω–∞</a></li>
              <li><a href="../index.html#advertisements">–û–≥–æ–ª–æ—à–µ–Ω–Ω—è</a></li>
            </ul>
          </nav>
          <div>
            <ul class="header__translation">
              <li>–£–∫—Ä</li>
              <li>Eng</li>
            </ul>
          </div>
          <div class="header__btn">
            <a href="#!" onclick="checkAuthForAd()">–î–æ–¥–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</a>
          </div>
          <div class="header__account">
            <a href="../pages/auth.html">
              <img src="../icons/–ê–∫–∫–∞—É–Ω—Ç —á–æ—Ä–Ω–∏–π.svg" alt="">
              –í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="profile-section">
        <h2>–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å</h2>
        
        <!-- –ë–ª–æ–∫ –∞–≤–∞—Ç–∞—Ä–∫–∏ -->
        <div class="avatar-section">
            <div class="avatar-display">
                <div id="avatarContainer" class="avatar-container"></div>
            </div>
            <div class="avatar-controls">
                <label for="avatarUpload" class="upload-btn">
                    üì∑ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä–∫—É
                </label>
                <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
            </div>
        </div>
        
        <div class="profile-data">
            <p><span class="label">–Ü–º'—è:</span> <span class="value" id="profileName">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span></p>
            <p><span class="label">–ü—Ä—ñ–∑–≤–∏—â–µ:</span> <span class="value" id="profileSurname">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span></p>
            <p><span class="label">–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ:</span> <span class="value" id="profilePatronymic">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span></p>
            <p><span class="label">–¢–µ–ª–µ—Ñ–æ–Ω:</span> <span class="value" id="profilePhone">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span></p>
            <p><span class="label">Email:</span> <span class="value" id="profileEmail">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span></p>
            <p><span class="label">–õ–æ–≥—ñ–Ω:</span> <span class="value" id="profileLogin">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span></p>
        </div>
        
        <div class="profile-actions">
            <button id="editProfileBtn">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
            <button id="saveProfileBtn" style="display:none;">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
            <button id="logoutBtn">–í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç—É</button>
        </div>
    </section>

        <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –º–µ–Ω—é -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

      <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –Ω–µ–∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>–£–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É</h3>
            <p>–©–æ–± –¥–æ–¥–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, –±—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–≤—ñ–π –∞–∫–∞—É–Ω—Ç –∞–±–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å.</p>
            <div class="modal-actions">
                <button onclick="window.location.href='./auth.html'" class="modal-btn primary">–£–≤—ñ–π—Ç–∏/–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</button>
                <button class="modal-btn secondary close-modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </div>
    </div>
  </main>



  <script>
    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
    function checkAuthForAd() {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) {
            showAuthModal();
            return false;
        }
        window.location.href = './add-advertisement.html';
        return true;
    }

    // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
    function showAuthModal() {
        const modal = document.getElementById('authModal');
        if (modal) {
            modal.style.display = 'flex';
        }
    }

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—Ä–æ—Ñ—ñ–ª—é
    function initProfilePage() {
        console.log('=== –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø –°–¢–û–†–Ü–ù–ö–ò –ü–†–û–§–Ü–õ–Æ ===');
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        console.log('–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:', currentUser);
        
        if (!currentUser) {
            console.log('‚ùå –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ...');
            window.location.href = '../index.html';
            return;
        }

        // –û–Ω–æ–≤–ª—é—î–º–æ —Ö–µ–¥–µ—Ä
        if (typeof updateHeader === 'function') {
            updateHeader();
        }
        
        // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—é
        if (typeof loadProfileData === 'function') {
            console.log('–í–∏–∫–ª–∏–∫–∞—î–º–æ loadProfileData...');
            loadProfileData();
        } else if (typeof updateProfileData === 'function') {
            console.log('–í–∏–∫–ª–∏–∫–∞—î–º–æ updateProfileData...');
            updateProfileData();
        } else {
            console.log('‚ùå –ñ–æ–¥–Ω–∞ –∑ —Ñ—É–Ω–∫—Ü—ñ–π –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞');
        }

        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–î–æ–¥–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è"
        const addAdBtn = document.querySelector('.header__btn a');
        if (addAdBtn) {
            addAdBtn.addEventListener('click', function(e) {
                e.preventDefault();
                checkAuthForAd();
            });
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
        const modal = document.getElementById('authModal');
        if (modal) {
            const closeBtn = modal.querySelector('.close-modal');
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    modal.style.display = 'none';
                });
            }
            
            // –ó–∞–∫—Ä–∏—Ç—Ç—è –ø—Ä–∏ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –º–æ–¥–∞–ª—å–Ω–∏–º –≤—ñ–∫–Ω–æ–º
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        console.log('‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ—Ñ—ñ–ª—é —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞');
    }

    // –ó–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø—Ä–∏ –ø–æ–≤–Ω–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM –≥–æ—Ç–æ–≤–∏–π, –∑–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø—Ä–æ—Ñ—ñ–ª—é...');
        setTimeout(initProfilePage, 100);
    });
  </script>
</body>
</html>